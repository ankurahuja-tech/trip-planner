<!DOCTYPE html>
{% extends 'base.html' %}

{% block title %}
    Trips | Trip Planner
{% endblock title %}

{% block header %}
    Trips
{% endblock header %}

{% block description %}
    Trip detail page.
{% endblock description %}

{% block content %}

    {{ block.super }}
    
    <div class="container content-max-width g-0">
        <br><br>
        <div class="row row-cols-1 row-cols-lg-2 g-3">
            <div class="col">
                <div class="card text-center">
                    <div class="card-header text-muted">
                        Trip details
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">{{ trip.title }}</h5>
                        <p class="card-text">{{ trip.start_date }} - {{ trip.end_date }}</p>
                        <hr class="trip__card-hr">
                        <p class="card-text">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Delectus, consectetur?</p>
                        <div class="col text-end">
                            <a href="{% url 'trips:trip_update' trip.pk %}" class="btn btn-primary">Update details</a>
                            <a href="{% url 'markers:marker_list' trip.pk %}" class="btn btn-primary">See Trip Map</a>
                            <a href="{% url 'trips:trip_delete' trip.pk %}" class="btn btn-outline-danger">Delete Trip</a>
                        </div>
                    </div>
                    <div class="card-header card-footer text-muted">
                        Trip picture
                    </div>
                    <div class="card-body">
                        <div class="card-text">
                            {% if trip.picture %}
                                <img class='trip__card-image mb-2' src="{{ trip.picture.url }}" alt="trip-img">
                            {% else %}
                                <p class="card-text text-muted">There is no picture for the trip yet.</p>
                            {% endif %}
                        </div>
                        <div class="col text-end">
                            <a href="{% url 'trips:trip_update_picture' trip.pk %}" class="btn btn-outline-primary">Update picture</a>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="col">
                <div class="card">
                    <div class="card-header text-muted text-center">
                        Notes
                    </div>
                    <div class="card-body">
                        {% if trip.notes %}
                            <p class="card-text">{{ trip.notes }}</p>
                        {% else %}
                            <p class="card-text text-muted">There are no notes for the trip yet.</p>                            
                        {% endif %}
                        <div class="text-end">
                            <a href="{% url 'trips:trip_update' trip.pk %}" class="btn btn-outline-primary">Update notes</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <br><br>
        
        <h4 class="text-center">Trip Days:</h4>
        <br>
        <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 row-cols-xxl-4 g-1 g-md-2 g-xl-3">
            {% for trip_day in trip.prefetched_trip_days %}
                <div class="col">
                    <div class="card">
                        <div class="card-header text-muted text-center">
                            Day details
                        </div>
                        <div class="card-body">
                            <h5 class="card-title text-center">{{ trip_day }}</h5>
                            <h6 class="text-center">{{ trip_day.date }}</h6>
                            <hr class="trip__card-hr">
                            {% if trip_day.notes %}
                                <p class="card-text">{{ trip_day.notes }}</p>
                            {% else %}
                                <p class="card-text text-muted text-center">There are no notes for the day yet.</p>
                            {% endif %}
                            <div class="col text-end">
                                <a href="{% url 'trips:trip_day_update' trip.pk trip_day.pk %}" type="button" class="btn btn-sm btn-outline-primary">Update notes</a>
                            </div>
                        </div>
                        <div class="card-header card-footer text-muted text-center">
                            Activities
                        </div>
                        <ul class="list-group list-group-flush">
                            {% if trip_day.prefetched_activities %}
                                {% for activity in trip_day.prefetched_activities %}
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div class="d-inline"><span>{{ activity.title }}</span></div>
                                        <div class="btn-group-vertical" role="group" aria-label="Activity buttons">
                                            <a href="{% url 'trips:activity_update' trip.pk trip_day.pk activity.pk %}" type="button" class="btn btn-outline-secondary btn-sm">Update</a>
                                            <a href="{% url 'trips:activity_delete' trip.pk trip_day.pk activity.pk %}" type="button" class="btn btn-outline-secondary btn-sm">Delete</a>
                                        </div>
                                    </li>
                                {% endfor %}
                            {% else %}
                                <p class="card-text text-muted text-center">There are no activities for the day yet.</p>
                            {% endif %}
                        </ul>
                        <div class="card-body text-end">
                            <a href="{% url 'trips:activity_create' trip.pk trip_day.pk %}" type="button" class="btn btn-sm btn-outline-primary">Add activity</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <br>
    </div>

{% endblock content %}
